=== Begin SRU Template ===
[Impact]

Without this change, cloud-init is not responsible for the network
configuration in Azure instances (instead, the static configuration hard-coded
in the images is used).  As cloud-init evolves to support more Azure use cases,
this will cause issues when users try to do anything outside of what is
supported by the baked-in configuration.

[Test Case]

xenial doesn't use netplan, so is excluded.

```
sshopts=( -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o LogLevel=ERROR )

cat > setup_proposed.sh <<EOF
#/bin/bash
mirror=http://archive.ubuntu.com/ubuntu
echo deb \$mirror \$(lsb_release -sc)-proposed main | tee /etc/apt/sources.list.d/proposed.list
apt-get update -q;
apt-get install -qy cloud-init;
EOF

az vm create --name=my-b1-58476e71 --image=Canonical:UbuntuServer:18.04-DAILY-LTS:latest --admin-username=root -g xx16resourcegroup --admin-username=ubuntu
az vm create --name=my-c1-58476e71 --image=Canonical:UbuntuServer:18.10-DAILY:latest --admin-username=root -g xx16resourcegroup --admin-username=ubuntu

for name in my-b1-58476e71 my-c1-58476e71; do
    vm_ip=`az vm list-ip-addresses --name $name | jq -r '.[] | .virtualMachine.network.publicIpAddresses[].ipAddress'| awk '{printf "ubuntu@%s", $1}'`;
    ssh "${sshopts[@]}" $vm_ip -- cloud-init status --wait --long
    ssh "${sshopts[@]}" $vm_ip -- ls /etc/netplan/90-hotplug-azure.yaml && echo "BEFORE: FILE PRESENT"
    ssh "${sshopts[@]}" $vm_ip -- sudo bash ./setup_proposed.sh 2>&1 | egrep 'cloud-init'
    ssh "${sshopts[@]}" $vm_ip -- sudo cloud-init clean --reboot
    sleep 120
    ssh "${sshopts[@]}" $vm_ip -- ls /etc/netplan/90-hotplug-azure.yaml || echo "AFTER: FILE GONE AS EXPECTED"
done
```

[Regression Potential]

This replaces the baked-in configuration, which DHCPs on all interfaces by
default, with configuration generated by cloud-init from Azure's metadata
service (IMDS).  This may cause issues for users who have networking configured
in a way other than that defined by the baked-in configuration, as they will
start actually getting the networking they configured.

[Other Info]
Upstream commit at
  https://git.launchpad.net/cloud-init/commit/?id=58476e71

=== End SRU Template ===

