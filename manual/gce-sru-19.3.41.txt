# Manual GCE upgrade and clean install validation Xenial, Bionic, Cosmic
 
# To be adapted to the SRU to test
SRU_SERIES="xenial bionic disco eoan"
ZONE="us-central1-b"

cat > sethostname.yaml << EOF
## template: jinja
#cloud-config
ssh_import_id : [daniel-thewatkins]
hostname: SRU-worked-{{v1.cloud_name}}
EOF

cat > setup_proposed.sh <<EOF
#/bin/bash
mirror=http://archive.ubuntu.com/ubuntu
echo deb \$mirror \$(lsb_release -sc)-proposed main | tee /etc/apt/sources.list.d/proposed.list
apt-get update -q
apt-get install -qy cloud-init
EOF

sshopts=( -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o LogLevel=ERROR )


for release in $SRU_SERIES; do
  echo "### BEGIN $release"

  netcfg=/etc/netplan/50-cloud-init.yaml
  case $release in
      xenial) family=ubuntu-1604-lts
              netcfg=/etc/network/interfaces.d/50-cloud-init.cfg;;
      bionic) family=ubuntu-1804-lts;;
      cosmic) family=ubuntu-1810;;
      disco) family=ubuntu-1904;;
      eoan) family=ubuntu-1910;;
      *) echo "!! UPDATE FAMILY CASE STATEMENT !!"; exit 1;;
  esac

  gcloud compute instances create $release-sru-test --image-family $family --image-project ubuntu-os-cloud-devel --metadata-from-file user-data=sethostname.yaml --zone=$ZONE;
  VM_IP=$(gcloud compute instances list | grep $release-sru | awk '{printf "%s", $5}')

  while ! ssh "${sshopts[@]}" ubuntu@$VM_IP -- cloud-init status --wait --long; do
      sleep 5
  done

  # Capture current state
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- dpkg-query --show cloud-init
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- sudo cat /run/cloud-init/result.json
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- grep Trace /var/log/cloud-init.log
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- systemd-analyze
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- systemd-analyze blame
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- cloud-init analyze show
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- cloud-init analyze blame
  echo 'Networking config'
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- cat $netcfg

  # Upgrade to -proposed cloud-init and reboot
  scp "${sshopts[@]}" setup_proposed.sh ubuntu@$VM_IP:.
  ssh "${sshopts[@]}" ubuntu@$VM_IP sudo bash ./setup_proposed.sh 2>&1 | egrep 'cloud-init'
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- dpkg-query --show cloud-init
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- sudo hostname SRU-didnt-work
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- sudo rm -f $netcfg
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- sudo cloud-init clean --logs --reboot
  ssh-keygen -f "/home/ubuntu/.ssh/known_hosts" -R $VM_IP

  sleep 10  # Wait for the instance to actually go down
  while ! ssh "${sshopts[@]}" ubuntu@$VM_IP -- cloud-init status --wait --long; do
      sleep 5
  done

  ssh "${sshopts[@]}" ubuntu@$VM_IP -- hostname
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- "grep Trace /var/log/cloud-init*"
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- systemd-analyze
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- systemd-analyze blame
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- cloud-init analyze show
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- cloud-init analyze blame
  echo 'After upgrade Networking config'
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- cat $netcfg
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- cloud-init query --format "'cloud-region: {{cloud_name}}-{{region}}'"
  echo "Get cloud-id"
  ssh "${sshopts[@]}" ubuntu@$VM_IP cloud-id

  echo 'Validating whether metadata is being updated per boot LP:1819913'
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- grep 'Update\ datasource' /var/log/cloud-init.log
  ssh "${sshopts[@]}" ubuntu@$VM_IP sudo reboot || true

  sleep 10
  while ! ssh "${sshopts[@]}" ubuntu@$VM_IP -- cloud-init status --wait --long; do
      sleep 5
  done

  echo 'After reboot'
  ssh "${sshopts[@]}" ubuntu@$VM_IP -- grep 'Update\ datasource' /var/log/cloud-init.log
done

for release in $SRU_SERIES; do
  gcloud compute instances delete --zone=$ZONE --quiet $release-sru-test
done

### BEGIN xenial
NAME             ZONE           MACHINE_TYPE   PREEMPTIBLE  INTERNAL_IP  EXTERNAL_IP    STATUS
xenial-sru-test  us-central1-b  n1-standard-1               10.240.0.70  35.184.167.32  RUNNING

status: done
time: Fri, 06 Dec 2019 22:29:13 +0000
detail:
DataSourceGCE
cloud-init	19.2-36-g059d049c-0ubuntu2~16.04.1
{
 "v1": {
  "datasource": "DataSourceGCE",
  "errors": []
 }
}
Startup finished in 2.617s (kernel) + 50.985s (userspace) = 53.602s
         27.673s snapd.seeded.service
         12.868s cloud-init.service
         10.160s pollinate.service
          2.868s accounts-daemon.service
          2.676s mdadm.service
          2.596s grub-common.service
          2.461s cloud-config.service
          1.792s apparmor.service
          1.750s cloud-init-local.service
          1.668s systemd-logind.service
          1.375s ntp.service
          1.116s iscsid.service
          1.103s dev-sda1.device
          1.033s ondemand.service
          1.030s apport.service
           996ms rsyslog.service
           951ms snapd.service
           885ms lxd-containers.service
           806ms rc-local.service
           796ms sshguard.service
           694ms google-instance-setup.service
           667ms plymouth-quit-wait.service
           579ms snapd.socket
           500ms cloud-final.service
           411ms lxd.socket
           378ms networking.service
           349ms plymouth-quit.service
           347ms systemd-user-sessions.service
           347ms polkitd.service
           347ms google-shutdown-scripts.service
           322ms lvm2-monitor.service
           263ms console-setup.service
           247ms google-startup-scripts.service
           129ms systemd-modules-load.service
           128ms resolvconf.service
           120ms systemd-remount-fs.service
           115ms keyboard-setup.service
           110ms ufw.service
           105ms kmod-static-nodes.service
            96ms systemd-udev-trigger.service
            96ms systemd-tmpfiles-setup-dev.service
            95ms systemd-udevd.service
            83ms systemd-journald.service
            82ms systemd-journal-flush.service
            80ms systemd-tmpfiles-setup.service
            69ms sys-kernel-debug.mount
            63ms systemd-machine-id-commit.service
            59ms open-iscsi.service
            58ms systemd-random-seed.service
            53ms dev-hugepages.mount
            47ms sys-kernel-config.mount
            47ms systemd-update-utmp.service
            44ms ssh.service
            43ms systemd-sysctl.service
            39ms sys-fs-fuse-connections.mount
            31ms plymouth-read-write.service
            25ms dev-mqueue.mount
            23ms user@1000.service
            17ms systemd-update-utmp-runlevel.service
            15ms boot-efi.mount
            12ms setvtrgb.service
-- Boot Record 01 --
The total time elapsed since completing an event is printed after the "@" character.
The time the event takes is printed after the "+" character.

Starting stage: init-local
|`->no cache found @00.01500s +00.00000s
Finished stage: (init-local) 00.06600 seconds 

Starting stage: init-network
|`->no cache found @01.01900s +00.00100s
|`->found network data from DataSourceGCE @01.02400s +11.71200s
|`->setting up datasource @12.80600s +00.00100s
|`->reading and applying user-data @12.82100s +00.00800s
|`->reading and applying vendor-data @12.82900s +00.00100s
|`->activating datasource @12.85900s +00.00100s
|`->config-migrator ran successfully @12.88700s +00.00000s
|`->config-seed_random ran successfully @12.88800s +00.00000s
|`->config-bootcmd ran successfully @12.88900s +00.00000s
|`->config-write-files ran successfully @12.88900s +00.00100s
|`->config-growpart ran successfully @12.89000s +00.12000s
|`->config-resizefs ran successfully @13.01100s +00.07100s
|`->config-disk_setup ran successfully @13.08300s +00.00100s
|`->config-mounts ran successfully @13.08400s +00.00100s
|`->config-set_hostname ran successfully @13.08600s +00.00900s
|`->config-update_hostname ran successfully @13.09600s +00.00100s
|`->config-update_etc_hosts ran successfully @13.09700s +00.00000s
|`->config-ca-certs ran successfully @13.09800s +00.00100s
|`->config-rsyslog ran successfully @13.09900s +00.00000s
|`->config-users-groups ran successfully @13.10000s +00.10100s
|`->config-ssh ran successfully @13.20100s +00.26700s
Finished stage: (init-network) 12.46500 seconds 

Starting stage: modules-config
|`->config-emit_upstart ran successfully @44.72500s +00.00000s
|`->config-snap ran successfully @44.72600s +00.00000s
|`->config-snap_config ran successfully @44.72700s +00.00000s
|`->config-ssh-import-id ran successfully @44.72700s +00.70500s
|`->config-locale ran successfully @45.43300s +00.93900s
|`->config-set-passwords ran successfully @46.37200s +00.00200s
|`->config-grub-dpkg ran successfully @46.37400s +00.21700s
|`->config-apt-pipelining ran successfully @46.59200s +00.00100s
|`->config-apt-configure ran successfully @46.59300s +00.12200s
|`->config-ubuntu-advantage ran successfully @46.71500s +00.00100s
|`->config-ntp ran successfully @46.71600s +00.00100s
|`->config-timezone ran successfully @46.71700s +00.00100s
|`->config-disable-ec2-metadata ran successfully @46.71800s +00.00000s
|`->config-runcmd ran successfully @46.71900s +00.00000s
|`->config-byobu ran successfully @46.71900s +00.00100s
Finished stage: (modules-config) 02.02100 seconds 

Starting stage: modules-final
|`->config-snappy ran successfully @47.16700s +00.00200s
|`->config-package-update-upgrade-install ran successfully @47.16900s +00.00100s
|`->config-fan ran successfully @47.17000s +00.00100s
|`->config-landscape ran successfully @47.17100s +00.00000s
|`->config-lxd ran successfully @47.17200s +00.00000s
|`->config-ubuntu-drivers ran successfully @47.17300s +00.00000s
|`->config-puppet ran successfully @47.17300s +00.00100s
|`->config-chef ran successfully @47.17500s +00.00100s
|`->config-mcollective ran successfully @47.17600s +00.00000s
|`->config-salt-minion ran successfully @47.17700s +00.00000s
|`->config-rightscale_userdata ran successfully @47.17800s +00.00000s
|`->config-scripts-vendor ran successfully @47.17800s +00.00100s
|`->config-scripts-per-once ran successfully @47.17900s +00.00100s
|`->config-scripts-per-boot ran successfully @47.18000s +00.00000s
|`->config-scripts-per-instance ran successfully @47.18000s +00.00100s
|`->config-scripts-user ran successfully @47.18100s +00.00100s
|`->config-ssh-authkey-fingerprints ran successfully @47.18200s +00.00300s
|`->config-keys-to-console ran successfully @47.18500s +00.02300s
|`->config-phone-home ran successfully @47.20900s +00.00100s
|`->config-final-message ran successfully @47.21000s +00.00700s
|`->config-power-state-change ran successfully @47.21700s +00.00100s
Finished stage: (modules-final) 00.08100 seconds 

Total Time: 14.63300 seconds

1 boot records analyzed
-- Boot Record 01 --
     11.71200s (init-network/search-GCE)
     00.93900s (modules-config/config-locale)
     00.70500s (modules-config/config-ssh-import-id)
     00.26700s (init-network/config-ssh)
     00.21700s (modules-config/config-grub-dpkg)
     00.12200s (modules-config/config-apt-configure)
     00.12000s (init-network/config-growpart)
     00.10100s (init-network/config-users-groups)
     00.07100s (init-network/config-resizefs)
     00.02300s (modules-final/config-keys-to-console)
     00.00900s (init-network/config-set_hostname)
     00.00800s (init-network/consume-user-data)
     00.00700s (modules-final/config-final-message)
     00.00300s (modules-final/config-ssh-authkey-fingerprints)
     00.00200s (modules-final/config-snappy)
     00.00200s (modules-config/config-set-passwords)
     00.00100s (modules-final/config-scripts-vendor)
     00.00100s (modules-final/config-scripts-user)
     00.00100s (modules-final/config-scripts-per-once)
     00.00100s (modules-final/config-scripts-per-instance)
     00.00100s (modules-final/config-puppet)
     00.00100s (modules-final/config-power-state-change)
     00.00100s (modules-final/config-phone-home)
     00.00100s (modules-final/config-package-update-upgrade-install)
     00.00100s (modules-final/config-fan)
     00.00100s (modules-final/config-chef)
     00.00100s (modules-config/config-ubuntu-advantage)
     00.00100s (modules-config/config-timezone)
     00.00100s (modules-config/config-ntp)
     00.00100s (modules-config/config-byobu)
     00.00100s (modules-config/config-apt-pipelining)
     00.00100s (init-network/setup-datasource)
     00.00100s (init-network/consume-vendor-data)
     00.00100s (init-network/config-write-files)
     00.00100s (init-network/config-update_hostname)
     00.00100s (init-network/config-mounts)
     00.00100s (init-network/config-disk_setup)
     00.00100s (init-network/config-ca-certs)
     00.00100s (init-network/check-cache)
     00.00100s (init-network/activate-datasource)
     00.00000s (modules-final/config-ubuntu-drivers)
     00.00000s (modules-final/config-scripts-per-boot)
     00.00000s (modules-final/config-salt-minion)
     00.00000s (modules-final/config-rightscale_userdata)
     00.00000s (modules-final/config-mcollective)
     00.00000s (modules-final/config-lxd)
     00.00000s (modules-final/config-landscape)
     00.00000s (modules-config/config-snap_config)
     00.00000s (modules-config/config-snap)
     00.00000s (modules-config/config-runcmd)
     00.00000s (modules-config/config-emit_upstart)
     00.00000s (modules-config/config-disable-ec2-metadata)
     00.00000s (init-network/config-update_etc_hosts)
     00.00000s (init-network/config-seed_random)
     00.00000s (init-network/config-rsyslog)
     00.00000s (init-network/config-migrator)
     00.00000s (init-network/config-bootcmd)
     00.00000s (init-local/check-cache)

1 boot records analyzed
Networking config
# This file is generated from information provided by
# the datasource.  Changes to it will not persist across an instance.
# To disable cloud-init's network configuration capabilities, write a file
# /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:
# network: {config: disabled}
auto lo
iface lo inet loopback

auto ens4
iface ens4 inet dhcp
  cloud-init
Get:1 http://archive.ubuntu.com/ubuntu xenial-proposed/main amd64 cloud-init all 19.3-41-gc4735dd3-0ubuntu1~16.04.1 [414 kB]
Preparing to unpack .../cloud-init_19.3-41-gc4735dd3-0ubuntu1~16.04.1_all.deb ...
Unpacking cloud-init (19.3-41-gc4735dd3-0ubuntu1~16.04.1) over (19.2-36-g059d049c-0ubuntu2~16.04.1) ...
Setting up cloud-init (19.3-41-gc4735dd3-0ubuntu1~16.04.1) ...
Leaving 'diversion of /etc/init/ureadahead.conf to /etc/init/ureadahead.conf.disabled by cloud-init'
cloud-init	19.3-41-gc4735dd3-0ubuntu1~16.04.1

status: done
time: Fri, 06 Dec 2019 22:30:19 +0000
detail:
DataSourceGCE
SRU-worked-gce
Startup finished in 2.653s (kernel) + 14.414s (userspace) = 17.068s
          2.580s cloud-final.service
          2.569s cloud-config.service
          2.546s accounts-daemon.service
          1.761s open-iscsi.service
          1.578s grub-common.service
          1.493s cloud-init-local.service
          1.439s dev-sda1.device
          1.419s mdadm.service
          1.403s pollinate.service
          1.064s systemd-logind.service
          1.037s ntp.service
          1.035s ondemand.service
          1.034s apport.service
          1.013s ssh.service
          1.007s snapd.service
           974ms rc-local.service
           942ms sshguard.service
           939ms cloud-init.service
           767ms lxd-containers.service
           749ms rsyslog.service
           690ms google-instance-setup.service
           688ms plymouth-quit.service
           688ms plymouth-quit-wait.service
           559ms iscsid.service
           462ms lvm2-monitor.service
           420ms apparmor.service
           404ms google-startup-scripts.service
           367ms lxd.socket
           364ms networking.service
           356ms systemd-user-sessions.service
           343ms polkitd.service
           339ms snapd.seeded.service
           337ms google-shutdown-scripts.service
           326ms setvtrgb.service
           273ms resolvconf.service
           238ms console-setup.service
           234ms systemd-udev-trigger.service
           211ms systemd-remount-fs.service
           207ms ufw.service
           205ms systemd-modules-load.service
           204ms keyboard-setup.service
           203ms kmod-static-nodes.service
           187ms dev-hugepages.mount
           158ms sys-kernel-debug.mount
           154ms systemd-journal-flush.service
           144ms systemd-tmpfiles-setup-dev.service
           143ms systemd-random-seed.service
           116ms systemd-sysctl.service
            99ms systemd-journald.service
            94ms dev-mqueue.mount
            79ms systemd-tmpfiles-setup.service
            79ms sys-fs-fuse-connections.mount
            69ms systemd-udevd.service
            47ms snapd.socket
            47ms sys-kernel-config.mount
            34ms systemd-update-utmp.service
            24ms user@1000.service
            15ms plymouth-read-write.service
            14ms boot-efi.mount
            10ms systemd-update-utmp-runlevel.service
-- Boot Record 01 --
The total time elapsed since completing an event is printed after the "@" character.
The time the event takes is printed after the "+" character.

Starting stage: init-local
|`->no cache found @00.00500s +00.00000s
Finished stage: (init-local) 00.04100 seconds

Starting stage: init-network
|`->no cache found @00.86100s +00.00100s
|`->found network data from DataSourceGCE @00.86600s +00.05500s
|`->setting up datasource @00.99100s +00.00000s
|`->reading and applying user-data @01.00300s +00.00800s
|`->reading and applying vendor-data @01.01100s +00.00000s
|`->activating datasource @01.04100s +00.00200s
|`->config-migrator ran successfully @01.06900s +00.00100s
|`->config-seed_random ran successfully @01.07000s +00.00100s
|`->config-bootcmd ran successfully @01.07100s +00.00000s
|`->config-write-files ran successfully @01.07100s +00.00100s
|`->config-growpart ran successfully @01.07200s +00.07200s
|`->config-resizefs ran successfully @01.14500s +00.02500s
|`->config-disk_setup ran successfully @01.17000s +00.00400s
|`->config-mounts ran successfully @01.17500s +00.00100s
|`->config-set_hostname ran successfully @01.17700s +00.00500s
|`->config-update_hostname ran successfully @01.18200s +00.00100s
|`->config-update_etc_hosts ran successfully @01.18300s +00.00100s
|`->config-ca-certs ran successfully @01.18400s +00.00100s
|`->config-rsyslog ran successfully @01.18500s +00.00100s
|`->config-users-groups ran successfully @01.18600s +00.03400s
|`->config-ssh ran successfully @01.22000s +00.17000s
Finished stage: (init-network) 00.54500 seconds

Starting stage: modules-config
|`->config-emit_upstart ran successfully @05.61300s +00.00000s
|`->config-snap ran successfully @05.61300s +00.00100s
|`->config-snap_config ran successfully @05.61400s +00.00100s
|`->config-ssh-import-id ran successfully @05.61500s +01.31300s
|`->config-locale ran successfully @06.92800s +00.00200s
|`->config-set-passwords ran successfully @06.93000s +00.00100s
|`->config-grub-dpkg ran successfully @06.93200s +01.61700s
|`->config-apt-pipelining ran successfully @08.55000s +00.00100s
|`->config-apt-configure ran successfully @08.55100s +00.21400s
|`->config-ubuntu-advantage ran successfully @08.76500s +00.00100s
|`->config-ntp ran successfully @08.76600s +00.00100s
|`->config-timezone ran successfully @08.76700s +00.00100s
|`->config-disable-ec2-metadata ran successfully @08.76800s +00.00000s
|`->config-runcmd ran successfully @08.76900s +00.00000s
|`->config-byobu ran successfully @08.77000s +00.00000s
Finished stage: (modules-config) 03.19900 seconds

Starting stage: modules-final
|`->config-snappy ran successfully @09.78400s +00.00200s
|`->config-package-update-upgrade-install ran successfully @09.78600s +00.00100s
|`->config-fan ran successfully @09.78700s +00.00100s
|`->config-landscape ran successfully @09.78800s +00.00100s
|`->config-lxd ran successfully @09.78900s +00.00100s
|`->config-ubuntu-drivers ran successfully @09.79000s +00.00100s
|`->config-puppet ran successfully @09.79100s +00.00100s
|`->config-chef ran successfully @09.79200s +00.00100s
|`->config-mcollective ran successfully @09.79300s +00.00000s
|`->config-salt-minion ran successfully @09.79400s +00.00100s
|`->config-rightscale_userdata ran successfully @09.79500s +00.00100s
|`->config-scripts-vendor ran successfully @09.79600s +00.00100s
|`->config-scripts-per-once ran successfully @09.79700s +00.00100s
|`->config-scripts-per-boot ran successfully @09.79800s +00.00000s
|`->config-scripts-per-instance ran successfully @09.79800s +00.00100s
|`->config-scripts-user ran successfully @09.79900s +00.00100s
|`->config-ssh-authkey-fingerprints ran successfully @09.80000s +01.56400s
|`->config-keys-to-console ran successfully @11.36400s +00.38900s
|`->config-phone-home ran successfully @11.75300s +00.00200s
|`->config-final-message ran successfully @11.75500s +00.05400s
|`->config-power-state-change ran successfully @11.81400s +00.00500s
Finished stage: (modules-final) 02.09600 seconds

Total Time: 5.88100 seconds

1 boot records analyzed
-- Boot Record 01 --
     01.61700s (modules-config/config-grub-dpkg)
     01.56400s (modules-final/config-ssh-authkey-fingerprints)
     01.31300s (modules-config/config-ssh-import-id)
     00.38900s (modules-final/config-keys-to-console)
     00.21400s (modules-config/config-apt-configure)
     00.17000s (init-network/config-ssh)
     00.07200s (init-network/config-growpart)
     00.05500s (init-network/search-GCE)
     00.05400s (modules-final/config-final-message)
     00.03400s (init-network/config-users-groups)
     00.02500s (init-network/config-resizefs)
     00.00800s (init-network/consume-user-data)
     00.00500s (modules-final/config-power-state-change)
     00.00500s (init-network/config-set_hostname)
     00.00400s (init-network/config-disk_setup)
     00.00200s (modules-final/config-snappy)
     00.00200s (modules-final/config-phone-home)
     00.00200s (modules-config/config-locale)
     00.00200s (init-network/activate-datasource)
     00.00100s (modules-final/config-ubuntu-drivers)
     00.00100s (modules-final/config-scripts-vendor)
     00.00100s (modules-final/config-scripts-user)
     00.00100s (modules-final/config-scripts-per-once)
     00.00100s (modules-final/config-scripts-per-instance)
     00.00100s (modules-final/config-salt-minion)
     00.00100s (modules-final/config-rightscale_userdata)
     00.00100s (modules-final/config-puppet)
     00.00100s (modules-final/config-package-update-upgrade-install)
     00.00100s (modules-final/config-lxd)
     00.00100s (modules-final/config-landscape)
     00.00100s (modules-final/config-fan)
     00.00100s (modules-final/config-chef)
     00.00100s (modules-config/config-ubuntu-advantage)
     00.00100s (modules-config/config-timezone)
     00.00100s (modules-config/config-snap_config)
     00.00100s (modules-config/config-snap)
     00.00100s (modules-config/config-set-passwords)
     00.00100s (modules-config/config-ntp)
     00.00100s (modules-config/config-apt-pipelining)
     00.00100s (init-network/config-write-files)
     00.00100s (init-network/config-update_hostname)
     00.00100s (init-network/config-update_etc_hosts)
     00.00100s (init-network/config-seed_random)
     00.00100s (init-network/config-rsyslog)
     00.00100s (init-network/config-mounts)
     00.00100s (init-network/config-migrator)
     00.00100s (init-network/config-ca-certs)
     00.00100s (init-network/check-cache)
     00.00000s (modules-final/config-scripts-per-boot)
     00.00000s (modules-final/config-mcollective)
     00.00000s (modules-config/config-runcmd)
     00.00000s (modules-config/config-emit_upstart)
     00.00000s (modules-config/config-disable-ec2-metadata)
     00.00000s (modules-config/config-byobu)
     00.00000s (init-network/setup-datasource)
     00.00000s (init-network/consume-vendor-data)
     00.00000s (init-network/config-bootcmd)
     00.00000s (init-local/check-cache)

1 boot records analyzed
After upgrade Networking config
# This file is generated from information provided by the datasource.  Changes
# to it will not persist across an instance reboot.  To disable cloud-init's
# network configuration capabilities, write a file
# /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:
# network: {config: disabled}
auto lo
iface lo inet loopback

auto ens4
iface ens4 inet dhcp
cloud-region: gce-us-central1
Get cloud-id
gce
Validating whether metadata is being updated per boot LP:1819913
2019-12-06 22:30:08,437 - __init__.py[DEBUG]: Update datasource metadata and network config due to events: New instance first boot

status: done
time: Fri, 06 Dec 2019 22:31:00 +0000
detail:
DataSourceGCE
After reboot
2019-12-06 22:30:08,437 - __init__.py[DEBUG]: Update datasource metadata and network config due to events: New instance first boot
2019-12-06 22:30:52,370 - __init__.py[DEBUG]: Update datasource metadata and network config due to events: New instance first boot

### BEGIN bionic
NAME             ZONE           MACHINE_TYPE   PREEMPTIBLE  INTERNAL_IP  EXTERNAL_IP    STATUS
bionic-sru-test  us-central1-b  n1-standard-1               10.240.0.71  35.222.36.193  RUNNING

status: done
time: Fri, 06 Dec 2019 22:35:49 +0000
detail:
DataSourceGCE
cloud-init	19.2-36-g059d049c-0ubuntu2~18.04.1
{
 "v1": {
  "datasource": "DataSourceGCE",
  "errors": []
 }
}
Startup finished in 3.997s (kernel) + 50.591s (userspace) = 54.589s
graphical.target reached after 47.718s in userspace
         35.138s snapd.seeded.service
         10.359s pollinate.service
          3.871s apport.service
          3.856s grub-common.service
          3.755s accounts-daemon.service
          2.211s networkd-dispatcher.service
          2.092s sshguard.service
          2.050s systemd-user-sessions.service
          1.909s systemd-networkd-wait-online.service
          1.889s cloud-config.service
          1.766s rsyslog.service
          1.537s dev-sda1.device
          1.489s cloud-init-local.service
          1.477s cloud-init.service
          1.342s polkit.service
          1.062s apparmor.service
          1.015s plymouth-quit-wait.service
           719ms systemd-logind.service
           682ms lxd-containers.service
           676ms google-instance-setup.service
           653ms cloud-final.service
           424ms lvm2-monitor.service
           394ms keyboard-setup.service
           384ms systemd-modules-load.service
           374ms blk-availability.service
           343ms systemd-udev-trigger.service
           342ms plymouth-quit.service
           340ms google-shutdown-scripts.service
           337ms setvtrgb.service
           321ms google-startup-scripts.service
           304ms lxd.socket
           283ms dev-hugepages.mount
           253ms ufw.service
           210ms systemd-remount-fs.service
           183ms dev-mqueue.mount
           181ms kmod-static-nodes.service
           159ms ebtables.service
           156ms systemd-journal-flush.service
           155ms sys-kernel-debug.mount
           121ms snapd.service
           115ms systemd-random-seed.service
           115ms systemd-tmpfiles-setup-dev.service
           115ms sys-kernel-config.mount
           115ms sys-fs-fuse-connections.mount
           114ms systemd-sysctl.service
           112ms systemd-networkd.service
            96ms systemd-tmpfiles-setup.service
            95ms systemd-machine-id-commit.service
            95ms plymouth-read-write.service
            87ms snapd.socket
            73ms systemd-udevd.service
            63ms console-setup.service
            58ms chrony.service
            58ms systemd-resolved.service
            47ms systemd-journald.service
            40ms user@1000.service
            35ms dev-loop1.device
            35ms ssh.service
            31ms snap-core-8039.mount
            27ms systemd-update-utmp.service
            23ms dev-loop0.device
            22ms snap-google\x2dcloud\x2dsdk-108.mount
            19ms systemd-update-utmp-runlevel.service
            14ms boot-efi.mount
-- Boot Record 01 --
The total time elapsed since completing an event is printed after the "@" character.
The time the event takes is printed after the "+" character.

Starting stage: init-local
|`->no cache found @00.00400s +00.00000s
Finished stage: (init-local) 00.21800 seconds 

Starting stage: init-network
|`->no cache found @02.83500s +00.00000s
|`->found network data from DataSourceGCE @02.85900s +00.06900s
|`->setting up datasource @03.11300s +00.00000s
|`->reading and applying user-data @03.12600s +00.00900s
|`->reading and applying vendor-data @03.13500s +00.00000s
|`->activating datasource @03.16000s +00.00200s
|`->config-migrator ran successfully @03.18500s +00.00000s
|`->config-seed_random ran successfully @03.18600s +00.00100s
|`->config-bootcmd ran successfully @03.18700s +00.00000s
|`->config-write-files ran successfully @03.18800s +00.00000s
|`->config-growpart ran successfully @03.18900s +00.17600s
|`->config-resizefs ran successfully @03.36500s +00.18000s
|`->config-disk_setup ran successfully @03.54500s +00.00100s
|`->config-mounts ran successfully @03.54700s +00.00100s
|`->config-set_hostname ran successfully @03.54800s +00.00600s
|`->config-update_hostname ran successfully @03.55400s +00.00100s
|`->config-update_etc_hosts ran successfully @03.55600s +00.00000s
|`->config-ca-certs ran successfully @03.55600s +00.00100s
|`->config-rsyslog ran successfully @03.55700s +00.00000s
|`->config-users-groups ran successfully @03.55800s +00.08800s
|`->config-ssh ran successfully @03.64700s +00.13300s
Finished stage: (init-network) 00.96200 seconds 

Starting stage: modules-config
|`->config-emit_upstart ran successfully @43.64400s +00.00000s
|`->config-snap ran successfully @43.64500s +00.00000s
|`->config-snap_config ran successfully @43.64500s +00.00100s
|`->config-ssh-import-id ran successfully @43.64600s +00.72900s
|`->config-locale ran successfully @44.37600s +00.00200s
|`->config-set-passwords ran successfully @44.37800s +00.00000s
|`->config-grub-dpkg ran successfully @44.37900s +00.29500s
|`->config-apt-pipelining ran successfully @44.67400s +00.00100s
|`->config-apt-configure ran successfully @44.67600s +00.11000s
|`->config-ubuntu-advantage ran successfully @44.78700s +00.00100s
|`->config-ntp ran successfully @44.78800s +00.08100s
|`->config-timezone ran successfully @44.86900s +00.00200s
|`->config-disable-ec2-metadata ran successfully @44.87100s +00.00000s
|`->config-runcmd ran successfully @44.87100s +00.00300s
|`->config-byobu ran successfully @44.87500s +00.00300s
Finished stage: (modules-config) 01.26000 seconds 

Starting stage: modules-final
|`->config-snappy ran successfully @45.49300s +00.00200s
|`->config-package-update-upgrade-install ran successfully @45.49500s +00.00100s
|`->config-fan ran successfully @45.49600s +00.00100s
|`->config-landscape ran successfully @45.49700s +00.00000s
|`->config-lxd ran successfully @45.49800s +00.00000s
|`->config-ubuntu-drivers ran successfully @45.49800s +00.00100s
|`->config-puppet ran successfully @45.49900s +00.00100s
|`->config-chef ran successfully @45.50000s +00.00000s
|`->config-mcollective ran successfully @45.50100s +00.00000s
|`->config-salt-minion ran successfully @45.50100s +00.00100s
|`->config-rightscale_userdata ran successfully @45.50200s +00.00100s
|`->config-scripts-vendor ran successfully @45.50300s +00.00000s
|`->config-scripts-per-once ran successfully @45.50400s +00.00000s
|`->config-scripts-per-boot ran successfully @45.50400s +00.00100s
|`->config-scripts-per-instance ran successfully @45.50500s +00.00000s
|`->config-scripts-user ran successfully @45.50600s +00.00000s
|`->config-ssh-authkey-fingerprints ran successfully @45.50600s +00.00300s
|`->config-keys-to-console ran successfully @45.50900s +00.02500s
|`->config-phone-home ran successfully @45.53400s +00.00200s
|`->config-final-message ran successfully @45.53600s +00.00500s
|`->config-power-state-change ran successfully @45.54200s +00.00000s
Finished stage: (modules-final) 00.08000 seconds 

Total Time: 2.52000 seconds

1 boot records analyzed
-- Boot Record 01 --
     00.72900s (modules-config/config-ssh-import-id)
     00.29500s (modules-config/config-grub-dpkg)
     00.18000s (init-network/config-resizefs)
     00.17600s (init-network/config-growpart)
     00.13300s (init-network/config-ssh)
     00.11000s (modules-config/config-apt-configure)
     00.08800s (init-network/config-users-groups)
     00.08100s (modules-config/config-ntp)
     00.06900s (init-network/search-GCE)
     00.02500s (modules-final/config-keys-to-console)
     00.00900s (init-network/consume-user-data)
     00.00600s (init-network/config-set_hostname)
     00.00500s (modules-final/config-final-message)
     00.00300s (modules-final/config-ssh-authkey-fingerprints)
     00.00300s (modules-config/config-runcmd)
     00.00300s (modules-config/config-byobu)
     00.00200s (modules-final/config-snappy)
     00.00200s (modules-final/config-phone-home)
     00.00200s (modules-config/config-timezone)
     00.00200s (modules-config/config-locale)
     00.00200s (init-network/activate-datasource)
     00.00100s (modules-final/config-ubuntu-drivers)
     00.00100s (modules-final/config-scripts-per-boot)
     00.00100s (modules-final/config-salt-minion)
     00.00100s (modules-final/config-rightscale_userdata)
     00.00100s (modules-final/config-puppet)
     00.00100s (modules-final/config-package-update-upgrade-install)
     00.00100s (modules-final/config-fan)
     00.00100s (modules-config/config-ubuntu-advantage)
     00.00100s (modules-config/config-snap_config)
     00.00100s (modules-config/config-apt-pipelining)
     00.00100s (init-network/config-update_hostname)
     00.00100s (init-network/config-seed_random)
     00.00100s (init-network/config-mounts)
     00.00100s (init-network/config-disk_setup)
     00.00100s (init-network/config-ca-certs)
     00.00000s (modules-final/config-scripts-vendor)
     00.00000s (modules-final/config-scripts-user)
     00.00000s (modules-final/config-scripts-per-once)
     00.00000s (modules-final/config-scripts-per-instance)
     00.00000s (modules-final/config-power-state-change)
     00.00000s (modules-final/config-mcollective)
     00.00000s (modules-final/config-lxd)
     00.00000s (modules-final/config-landscape)
     00.00000s (modules-final/config-chef)
     00.00000s (modules-config/config-snap)
     00.00000s (modules-config/config-set-passwords)
     00.00000s (modules-config/config-emit_upstart)
     00.00000s (modules-config/config-disable-ec2-metadata)
     00.00000s (init-network/setup-datasource)
     00.00000s (init-network/consume-vendor-data)
     00.00000s (init-network/config-write-files)
     00.00000s (init-network/config-update_etc_hosts)
     00.00000s (init-network/config-rsyslog)
     00.00000s (init-network/config-migrator)
     00.00000s (init-network/config-bootcmd)
     00.00000s (init-network/check-cache)
     00.00000s (init-local/check-cache)

1 boot records analyzed
Networking config
# This file is generated from information provided by
# the datasource.  Changes to it will not persist across an instance.
# To disable cloud-init's network configuration capabilities, write a file
# /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:
# network: {config: disabled}
network:
    ethernets:
        ens4:
            dhcp4: true
            match:
                macaddress: 42:01:0a:f0:00:47
            set-name: ens4
    version: 2
  cloud-init
Get:1 http://archive.ubuntu.com/ubuntu bionic-proposed/main amd64 cloud-init all 19.3-41-gc4735dd3-0ubuntu1~18.04.1 [411 kB]
Preparing to unpack .../cloud-init_19.3-41-gc4735dd3-0ubuntu1~18.04.1_all.deb ...
Unpacking cloud-init (19.3-41-gc4735dd3-0ubuntu1~18.04.1) over (19.2-36-g059d049c-0ubuntu2~18.04.1) ...
Setting up cloud-init (19.3-41-gc4735dd3-0ubuntu1~18.04.1) ...
cloud-init	19.3-41-gc4735dd3-0ubuntu1~18.04.1

status: done
time: Fri, 06 Dec 2019 22:37:02 +0000
detail:
DataSourceGCE
SRU-worked-gce
Startup finished in 3.779s (kernel) + 18.949s (userspace) = 22.729s
graphical.target reached after 15.241s in userspace
          4.421s apport.service
          3.169s networkd-dispatcher.service
          3.105s rsyslog.service
          3.089s pollinate.service
          3.064s accounts-daemon.service
          3.037s snapd.service
          2.713s grub-common.service
          2.600s cloud-config.service
          2.371s systemd-user-sessions.service
          2.367s sshguard.service
          1.658s dev-sda1.device
          1.558s cloud-init-local.service
          1.553s cloud-init.service
          1.488s systemd-logind.service
          1.429s systemd-networkd-wait-online.service
          1.353s lxd-containers.service
          1.246s cloud-final.service
          1.068s google-shutdown-scripts.service
          1.046s ssh.service
          1.021s systemd-hostnamed.service
          1.008s polkit.service
           682ms google-instance-setup.service
           674ms plymouth-quit.service
           671ms plymouth-quit-wait.service
           597ms apparmor.service
           544ms google-startup-scripts.service
           528ms systemd-journal-flush.service
           443ms blk-availability.service
           413ms dev-loop1.device
           410ms dev-loop0.device
           397ms lxd.socket
           358ms setvtrgb.service
           351ms snapd.socket
           340ms snapd.seeded.service
           312ms lvm2-monitor.service
           299ms systemd-udev-trigger.service
           251ms keyboard-setup.service
           251ms dev-mqueue.mount
           239ms sys-kernel-debug.mount
           237ms ufw.service
           236ms systemd-remount-fs.service
           227ms systemd-modules-load.service
           199ms kmod-static-nodes.service
           199ms dev-hugepages.mount
           115ms systemd-tmpfiles-setup-dev.service
           114ms systemd-random-seed.service
           111ms ebtables.service
            99ms systemd-sysctl.service
            99ms sys-kernel-config.mount
            99ms sys-fs-fuse-connections.mount
            97ms systemd-networkd.service
            89ms systemd-udevd.service
            73ms systemd-resolved.service
            63ms systemd-tmpfiles-setup.service
            63ms console-setup.service
            63ms plymouth-read-write.service
            61ms chrony.service
            58ms systemd-journald.service
            51ms systemd-update-utmp-runlevel.service
            38ms user@1000.service
            33ms snap-google\x2dcloud\x2dsdk-108.mount
            30ms snap-core-8039.mount
            26ms systemd-update-utmp.service
            15ms boot-efi.mount
-- Boot Record 01 --
The total time elapsed since completing an event is printed after the "@" character.
The time the event takes is printed after the "+" character.

Starting stage: init-local
|`->no cache found @00.00400s +00.00000s
Finished stage: (init-local) 00.20100 seconds

Starting stage: init-network
|`->no cache found @02.32600s +00.00000s
|`->found network data from DataSourceGCE @02.34800s +00.05700s
|`->setting up datasource @02.58900s +00.00100s
|`->reading and applying user-data @02.60400s +00.00900s
|`->reading and applying vendor-data @02.61300s +00.00000s
|`->activating datasource @02.63800s +00.00200s
|`->config-migrator ran successfully @02.66200s +00.00000s
|`->config-seed_random ran successfully @02.66300s +00.00100s
|`->config-bootcmd ran successfully @02.66400s +00.00000s
|`->config-write-files ran successfully @02.66400s +00.00100s
|`->config-growpart ran successfully @02.66500s +00.08000s
|`->config-resizefs ran successfully @02.74500s +00.04500s
|`->config-disk_setup ran successfully @02.79000s +00.00200s
|`->config-mounts ran successfully @02.79200s +00.00100s
|`->config-set_hostname ran successfully @02.79400s +00.01000s
|`->config-update_hostname ran successfully @02.80400s +00.00200s
|`->config-update_etc_hosts ran successfully @02.80600s +00.00000s
|`->config-ca-certs ran successfully @02.80700s +00.00000s
|`->config-rsyslog ran successfully @02.80700s +00.00100s
|`->config-users-groups ran successfully @02.80800s +00.02700s
|`->config-ssh ran successfully @02.83500s +00.52700s
Finished stage: (init-network) 01.05200 seconds

Starting stage: modules-config
|`->config-emit_upstart ran successfully @11.05700s +00.00000s
|`->config-snap ran successfully @11.05700s +00.00100s
|`->config-snap_config ran successfully @11.05800s +00.00100s
|`->config-ssh-import-id ran successfully @11.05900s +00.79500s
|`->config-locale ran successfully @11.85500s +00.00200s
|`->config-set-passwords ran successfully @11.85700s +00.00100s
|`->config-grub-dpkg ran successfully @11.85800s +00.40900s
|`->config-apt-pipelining ran successfully @12.26800s +00.00100s
|`->config-apt-configure ran successfully @12.26900s +00.12400s
|`->config-ubuntu-advantage ran successfully @12.39300s +00.00100s
|`->config-ntp ran successfully @12.39400s +00.08400s
|`->config-timezone ran successfully @12.47900s +00.00100s
|`->config-disable-ec2-metadata ran successfully @12.48000s +00.00000s
|`->config-runcmd ran successfully @12.48100s +00.00000s
|`->config-byobu ran successfully @12.48100s +00.00100s
Finished stage: (modules-config) 01.54500 seconds

Starting stage: modules-final
|`->config-snappy ran successfully @13.50800s +00.00200s
|`->config-package-update-upgrade-install ran successfully @13.51000s +00.00200s
|`->config-fan ran successfully @13.51400s +00.00100s
|`->config-landscape ran successfully @13.51500s +00.00100s
|`->config-lxd ran successfully @13.51600s +00.00100s
|`->config-ubuntu-drivers ran successfully @13.51700s +00.00000s
|`->config-puppet ran successfully @13.51800s +00.00200s
|`->config-chef ran successfully @13.52000s +00.00200s
|`->config-mcollective ran successfully @13.52200s +00.00500s
|`->config-salt-minion ran successfully @13.52700s +00.00100s
|`->config-rightscale_userdata ran successfully @13.52800s +00.00000s
|`->config-scripts-vendor ran successfully @13.52800s +00.00100s
|`->config-scripts-per-once ran successfully @13.52900s +00.00100s
|`->config-scripts-per-boot ran successfully @13.53000s +00.00200s
|`->config-scripts-per-instance ran successfully @13.53200s +00.00500s
|`->config-scripts-user ran successfully @13.53700s +00.00000s
|`->config-ssh-authkey-fingerprints ran successfully @13.53800s +00.00300s
|`->config-keys-to-console ran successfully @13.54100s +00.09800s
|`->config-phone-home ran successfully @13.64000s +00.00100s
|`->config-final-message ran successfully @13.64100s +00.01100s
|`->config-power-state-change ran successfully @13.65200s +00.00100s
Finished stage: (modules-final) 00.19000 seconds

Total Time: 2.98800 seconds

1 boot records analyzed
-- Boot Record 01 --
     00.79500s (modules-config/config-ssh-import-id)
     00.52700s (init-network/config-ssh)
     00.40900s (modules-config/config-grub-dpkg)
     00.12400s (modules-config/config-apt-configure)
     00.09800s (modules-final/config-keys-to-console)
     00.08400s (modules-config/config-ntp)
     00.08000s (init-network/config-growpart)
     00.05700s (init-network/search-GCE)
     00.04500s (init-network/config-resizefs)
     00.02700s (init-network/config-users-groups)
     00.01100s (modules-final/config-final-message)
     00.01000s (init-network/config-set_hostname)
     00.00900s (init-network/consume-user-data)
     00.00500s (modules-final/config-scripts-per-instance)
     00.00500s (modules-final/config-mcollective)
     00.00300s (modules-final/config-ssh-authkey-fingerprints)
     00.00200s (modules-final/config-snappy)
     00.00200s (modules-final/config-scripts-per-boot)
     00.00200s (modules-final/config-puppet)
     00.00200s (modules-final/config-package-update-upgrade-install)
     00.00200s (modules-final/config-chef)
     00.00200s (modules-config/config-locale)
     00.00200s (init-network/config-update_hostname)
     00.00200s (init-network/config-disk_setup)
     00.00200s (init-network/activate-datasource)
     00.00100s (modules-final/config-scripts-vendor)
     00.00100s (modules-final/config-scripts-per-once)
     00.00100s (modules-final/config-salt-minion)
     00.00100s (modules-final/config-power-state-change)
     00.00100s (modules-final/config-phone-home)
     00.00100s (modules-final/config-lxd)
     00.00100s (modules-final/config-landscape)
     00.00100s (modules-final/config-fan)
     00.00100s (modules-config/config-ubuntu-advantage)
     00.00100s (modules-config/config-timezone)
     00.00100s (modules-config/config-snap_config)
     00.00100s (modules-config/config-snap)
     00.00100s (modules-config/config-set-passwords)
     00.00100s (modules-config/config-byobu)
     00.00100s (modules-config/config-apt-pipelining)
     00.00100s (init-network/setup-datasource)
     00.00100s (init-network/config-write-files)
     00.00100s (init-network/config-seed_random)
     00.00100s (init-network/config-rsyslog)
     00.00100s (init-network/config-mounts)
     00.00000s (modules-final/config-ubuntu-drivers)
     00.00000s (modules-final/config-scripts-user)
     00.00000s (modules-final/config-rightscale_userdata)
     00.00000s (modules-config/config-runcmd)
     00.00000s (modules-config/config-emit_upstart)
     00.00000s (modules-config/config-disable-ec2-metadata)
     00.00000s (init-network/consume-vendor-data)
     00.00000s (init-network/config-update_etc_hosts)
     00.00000s (init-network/config-migrator)
     00.00000s (init-network/config-ca-certs)
     00.00000s (init-network/config-bootcmd)
     00.00000s (init-network/check-cache)
     00.00000s (init-local/check-cache)

1 boot records analyzed
After upgrade Networking config
# This file is generated from information provided by the datasource.  Changes
# to it will not persist across an instance reboot.  To disable cloud-init's
# network configuration capabilities, write a file
# /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:
# network: {config: disabled}
network:
    ethernets:
        ens4:
            dhcp4: true
            match:
                macaddress: 42:01:0a:f0:00:47
            set-name: ens4
    version: 2
cloud-region: gce-us-central1
Get cloud-id
gce
Validating whether metadata is being updated per boot LP:1819913
2019-12-06 22:36:51,055 - __init__.py[DEBUG]: Update datasource metadata and network config due to events: New instance first boot

status: done
time: Fri, 06 Dec 2019 22:39:20 +0000
detail:
DataSourceGCE
After reboot
2019-12-06 22:36:51,055 - __init__.py[DEBUG]: Update datasource metadata and network config due to events: New instance first boot
2019-12-06 22:39:14,022 - __init__.py[DEBUG]: Update datasource metadata and network config due to events: New instance first boot

### BEGIN disco
NAME            ZONE           MACHINE_TYPE   PREEMPTIBLE  INTERNAL_IP  EXTERNAL_IP   STATUS
disco-sru-test  us-central1-b  n1-standard-1               10.240.0.72  34.69.212.18  RUNNING
........................................................................
status: done
time: Fri, 06 Dec 2019 22:36:31 +0000
detail:
DataSourceGCE
cloud-init	19.2-36-g059d049c-0ubuntu2~19.04.1
{
 "v1": {
  "datasource": "DataSourceGCE",
  "errors": []
 }
}
Startup finished in 1.478s (kernel) + 1min 27.011s (userspace) = 1min 28.490s 
graphical.target reached after 1min 24.190s in userspace
    1min 13.849s snapd.seeded.service
         11.117s pollinate.service
          1.944s cloud-config.service
          1.915s systemd-logind.service
          1.883s cloud-init.service
          1.662s systemd-networkd-wait-online.service
          1.616s google-instance-setup.service
          1.566s lvm2-monitor.service
          1.560s dev-sda1.device
          1.350s cloud-init-local.service
          1.233s systemd-udev-settle.service
          1.179s networkd-dispatcher.service
           745ms apparmor.service
           585ms systemd-journald.service
           549ms cloud-final.service
           426ms snap.lxd.activate.service
           419ms rsyslog.service
           364ms systemd-networkd.service
           355ms systemd-resolved.service
           350ms accounts-daemon.service
           328ms google-startup-scripts.service
           310ms grub-common.service
           285ms snapd.socket
           281ms plymouth-quit.service
           281ms plymouth-quit-wait.service
           270ms apport.service
           242ms keyboard-setup.service
           229ms ufw.service
           225ms systemd-modules-load.service
           215ms sshguard.service
           195ms systemd-udev-trigger.service
           187ms systemd-sysusers.service
           167ms systemd-remount-fs.service
           142ms snapd.service
           140ms atd.service
           117ms dev-hugepages.mount
           112ms kmod-static-nodes.service
           110ms systemd-sysctl.service
            95ms blk-availability.service
            91ms user@1000.service
            74ms systemd-udevd.service
            74ms systemd-user-sessions.service
            65ms grub-initrd-fallback.service
            65ms chrony.service
            65ms systemd-tmpfiles-setup-dev.service
            60ms multipathd.service
            60ms systemd-machine-id-commit.service
            60ms dev-mqueue.mount
            55ms sys-kernel-debug.mount
            54ms finalrd.service
            53ms systemd-tmpfiles-setup.service
            49ms plymouth-read-write.service
            45ms dev-loop2.device
            41ms console-setup.service
            38ms snap-lxd-12317.mount
            35ms ssh.service
            34ms snap-google\x2dcloud\x2dsdk-108.mount
            33ms google-shutdown-scripts.service
            31ms dev-loop1.device
            31ms systemd-journal-flush.service
            27ms snap-core-8039.mount
            26ms dev-loop0.device
            20ms systemd-random-seed.service
            19ms sys-fs-fuse-connections.mount
            19ms systemd-update-utmp-runlevel.service
            19ms user-runtime-dir@1000.service
            18ms sys-kernel-config.mount
            17ms boot-efi.mount
            17ms systemd-update-utmp.service
            15ms setvtrgb.service
-- Boot Record 01 --
The total time elapsed since completing an event is printed after the "@" character.
The time the event takes is printed after the "+" character.

Starting stage: init-local
|`->no cache found @00.00500s +00.00000s
Finished stage: (init-local) 00.18900 seconds 

Starting stage: init-network
|`->no cache found @02.72100s +00.00000s
|`->found network data from DataSourceGCE @02.72500s +00.06600s
|`->setting up datasource @02.94500s +00.00100s
|`->reading and applying user-data @02.95800s +00.00700s
|`->reading and applying vendor-data @02.96500s +00.00000s
|`->activating datasource @02.98900s +00.00200s
|`->config-migrator ran successfully @03.01500s +00.00000s
|`->config-seed_random ran successfully @03.01600s +00.00000s
|`->config-bootcmd ran successfully @03.01700s +00.00000s
|`->config-write-files ran successfully @03.01700s +00.00000s
|`->config-growpart ran successfully @03.01800s +00.43400s
|`->config-resizefs ran successfully @03.45200s +00.20400s
|`->config-disk_setup ran successfully @03.65600s +00.00100s
|`->config-mounts ran successfully @03.65800s +00.00100s
|`->config-set_hostname ran successfully @03.65900s +00.00500s
|`->config-update_hostname ran successfully @03.66500s +00.00100s
|`->config-update_etc_hosts ran successfully @03.66600s +00.00000s
|`->config-ca-certs ran successfully @03.66600s +00.00100s
|`->config-rsyslog ran successfully @03.66700s +00.00000s
|`->config-users-groups ran successfully @03.66800s +00.08800s
|`->config-ssh ran successfully @03.75600s +00.40600s
Finished stage: (init-network) 01.45800 seconds 

Starting stage: modules-config
|`->config-emit_upstart ran successfully @79.70500s +00.00000s
|`->config-snap ran successfully @79.70500s +00.00100s
|`->config-snap_config ran successfully @79.70700s +00.00000s
|`->config-ssh-import-id ran successfully @79.70700s +00.82400s
|`->config-locale ran successfully @80.53200s +00.00100s
|`->config-set-passwords ran successfully @80.53400s +00.00000s
|`->config-grub-dpkg ran successfully @80.53400s +00.26400s
|`->config-apt-pipelining ran successfully @80.79800s +00.00100s
|`->config-apt-configure ran successfully @80.79900s +00.18900s
|`->config-ubuntu-advantage ran successfully @80.98800s +00.00100s
|`->config-ntp ran successfully @80.98900s +00.08900s
|`->config-timezone ran successfully @81.08000s +00.00100s
|`->config-disable-ec2-metadata ran successfully @81.08200s +00.00000s
|`->config-runcmd ran successfully @81.08200s +00.00100s
|`->config-byobu ran successfully @81.08300s +00.00100s
Finished stage: (modules-config) 01.41200 seconds 

Starting stage: modules-final
|`->config-snappy ran successfully @81.59500s +00.00100s
|`->config-package-update-upgrade-install ran successfully @81.59700s +00.00000s
|`->config-fan ran successfully @81.59700s +00.00100s
|`->config-landscape ran successfully @81.59800s +00.00100s
|`->config-lxd ran successfully @81.59900s +00.00000s
|`->config-ubuntu-drivers ran successfully @81.60000s +00.00000s
|`->config-puppet ran successfully @81.60000s +00.00100s
|`->config-chef ran successfully @81.60100s +00.00100s
|`->config-mcollective ran successfully @81.60200s +00.00000s
|`->config-salt-minion ran successfully @81.60200s +00.00100s
|`->config-rightscale_userdata ran successfully @81.60300s +00.00100s
|`->config-scripts-vendor ran successfully @81.60400s +00.00000s
|`->config-scripts-per-once ran successfully @81.60400s +00.00100s
|`->config-scripts-per-boot ran successfully @81.60500s +00.00000s
|`->config-scripts-per-instance ran successfully @81.60600s +00.00000s
|`->config-scripts-user ran successfully @81.60600s +00.00100s
|`->config-ssh-authkey-fingerprints ran successfully @81.60700s +00.00200s
|`->config-keys-to-console ran successfully @81.60900s +00.02700s
|`->config-phone-home ran successfully @81.63700s +00.00100s
|`->config-final-message ran successfully @81.63800s +00.00500s
|`->config-power-state-change ran successfully @81.64300s +00.00100s
Finished stage: (modules-final) 00.07900 seconds 

Total Time: 3.13800 seconds

1 boot records analyzed
-- Boot Record 01 --
     00.82400s (modules-config/config-ssh-import-id)
     00.43400s (init-network/config-growpart)
     00.40600s (init-network/config-ssh)
     00.26400s (modules-config/config-grub-dpkg)
     00.20400s (init-network/config-resizefs)
     00.18900s (modules-config/config-apt-configure)
     00.08900s (modules-config/config-ntp)
     00.08800s (init-network/config-users-groups)
     00.06600s (init-network/search-GCE)
     00.02700s (modules-final/config-keys-to-console)
     00.00700s (init-network/consume-user-data)
     00.00500s (modules-final/config-final-message)
     00.00500s (init-network/config-set_hostname)
     00.00200s (modules-final/config-ssh-authkey-fingerprints)
     00.00200s (init-network/activate-datasource)
     00.00100s (modules-final/config-snappy)
     00.00100s (modules-final/config-scripts-user)
     00.00100s (modules-final/config-scripts-per-once)
     00.00100s (modules-final/config-salt-minion)
     00.00100s (modules-final/config-rightscale_userdata)
     00.00100s (modules-final/config-puppet)
     00.00100s (modules-final/config-power-state-change)
     00.00100s (modules-final/config-phone-home)
     00.00100s (modules-final/config-landscape)
     00.00100s (modules-final/config-fan)
     00.00100s (modules-final/config-chef)
     00.00100s (modules-config/config-ubuntu-advantage)
     00.00100s (modules-config/config-timezone)
     00.00100s (modules-config/config-snap)
     00.00100s (modules-config/config-runcmd)
     00.00100s (modules-config/config-locale)
     00.00100s (modules-config/config-byobu)
     00.00100s (modules-config/config-apt-pipelining)
     00.00100s (init-network/setup-datasource)
     00.00100s (init-network/config-update_hostname)
     00.00100s (init-network/config-mounts)
     00.00100s (init-network/config-disk_setup)
     00.00100s (init-network/config-ca-certs)
     00.00000s (modules-final/config-ubuntu-drivers)
     00.00000s (modules-final/config-scripts-vendor)
     00.00000s (modules-final/config-scripts-per-instance)
     00.00000s (modules-final/config-scripts-per-boot)
     00.00000s (modules-final/config-package-update-upgrade-install)
     00.00000s (modules-final/config-mcollective)
     00.00000s (modules-final/config-lxd)
     00.00000s (modules-config/config-snap_config)
     00.00000s (modules-config/config-set-passwords)
     00.00000s (modules-config/config-emit_upstart)
     00.00000s (modules-config/config-disable-ec2-metadata)
     00.00000s (init-network/consume-vendor-data)
     00.00000s (init-network/config-write-files)
     00.00000s (init-network/config-update_etc_hosts)
     00.00000s (init-network/config-seed_random)
     00.00000s (init-network/config-rsyslog)
     00.00000s (init-network/config-migrator)
     00.00000s (init-network/config-bootcmd)
     00.00000s (init-network/check-cache)
     00.00000s (init-local/check-cache)

1 boot records analyzed
Networking config
# This file is generated from information provided by
# the datasource.  Changes to it will not persist across an instance.
# To disable cloud-init's network configuration capabilities, write a file
# /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:
# network: {config: disabled}
network:
    ethernets:
        ens4:
            dhcp4: true
            match:
                macaddress: 42:01:0a:f0:00:48
            set-name: ens4
    version: 2
  cloud-init
Get:1 http://archive.ubuntu.com/ubuntu disco-proposed/main amd64 cloud-init all 19.3-41-gc4735dd3-0ubuntu1~19.04.1 [407 kB]
Preparing to unpack .../cloud-init_19.3-41-gc4735dd3-0ubuntu1~19.04.1_all.deb ...
Unpacking cloud-init (19.3-41-gc4735dd3-0ubuntu1~19.04.1) over (19.2-36-g059d049c-0ubuntu2~19.04.1) ...
Setting up cloud-init (19.3-41-gc4735dd3-0ubuntu1~19.04.1) ...
cloud-init	19.3-41-gc4735dd3-0ubuntu1~19.04.1
.......
status: done
time: Fri, 06 Dec 2019 22:37:32 +0000
detail:
DataSourceGCE
SRU-worked-gce
Startup finished in 1.192s (kernel) + 17.075s (userspace) = 18.267s 
graphical.target reached after 13.148s in userspace
          4.788s cloud-config.service
          2.895s google-instance-setup.service
          2.602s snap.lxd.activate.service
          2.594s systemd-hostnamed.service
          2.513s systemd-logind.service
          2.274s pollinate.service
          1.962s systemd-networkd-wait-online.service
          1.640s dev-sda1.device
          1.566s networkd-dispatcher.service
          1.555s lvm2-monitor.service
          1.548s accounts-daemon.service
          1.429s cloud-init-local.service
          1.229s systemd-udev-settle.service
          1.219s snapd.service
          1.114s cloud-init.service
           744ms apparmor.service
           707ms apport.service
           687ms grub-common.service
           594ms cloud-final.service
           586ms systemd-journald.service
           481ms rsyslog.service
           369ms systemd-resolved.service
           364ms user@1000.service
           337ms systemd-networkd.service
           317ms google-startup-scripts.service
           286ms snapd.socket
           275ms keyboard-setup.service
           272ms snapd.seeded.service
           259ms systemd-udev-trigger.service
           244ms setvtrgb.service
           236ms sshguard.service
           159ms systemd-journal-flush.service
           154ms systemd-user-sessions.service
           142ms systemd-modules-load.service
           136ms dev-loop2.device
           131ms atd.service
           128ms ssh.service
           127ms dev-loop1.device
           120ms systemd-udevd.service
           115ms dev-mqueue.mount
           114ms kmod-static-nodes.service
           114ms ufw.service
           114ms systemd-remount-fs.service
           113ms dev-hugepages.mount
           106ms blk-availability.service
            98ms systemd-sysusers.service
            80ms sys-kernel-debug.mount
            75ms sys-fs-fuse-connections.mount
            72ms sys-kernel-config.mount
            67ms systemd-sysctl.service
            62ms multipathd.service
            62ms chrony.service
            58ms finalrd.service
            57ms plymouth-quit-wait.service
            57ms systemd-tmpfiles-setup.service
            52ms boot-efi.mount
            48ms snap-lxd-12317.mount
            47ms grub-initrd-fallback.service
            45ms dev-loop0.device
            43ms plymouth-read-write.service
            43ms snap-core-8039.mount
            42ms snap-google\x2dcloud\x2dsdk-108.mount
            40ms console-setup.service
            39ms user-runtime-dir@1000.service
            34ms google-shutdown-scripts.service
            31ms systemd-random-seed.service
            23ms plymouth-quit.service
            22ms systemd-update-utmp.service
            22ms systemd-tmpfiles-setup-dev.service
            16ms systemd-update-utmp-runlevel.service
-- Boot Record 01 --
The total time elapsed since completing an event is printed after the "@" character.
The time the event takes is printed after the "+" character.

Starting stage: init-local
|`->no cache found @00.00400s +00.00000s
Finished stage: (init-local) 00.20100 seconds

Starting stage: init-network
|`->no cache found @02.98200s +00.00100s
|`->found network data from DataSourceGCE @02.98700s +00.04400s
|`->setting up datasource @03.19100s +00.00000s
|`->reading and applying user-data @03.20400s +00.00800s
|`->reading and applying vendor-data @03.21200s +00.00000s
|`->activating datasource @03.23600s +00.00200s
|`->config-migrator ran successfully @03.27700s +00.00000s
|`->config-seed_random ran successfully @03.27700s +00.00100s
|`->config-bootcmd ran successfully @03.27800s +00.00000s
|`->config-write-files ran successfully @03.27800s +00.00100s
|`->config-growpart ran successfully @03.27900s +00.07800s
|`->config-resizefs ran successfully @03.35800s +00.07400s
|`->config-disk_setup ran successfully @03.43300s +00.00100s
|`->config-mounts ran successfully @03.43400s +00.00100s
|`->config-set_hostname ran successfully @03.43500s +00.00900s
|`->config-update_hostname ran successfully @03.44500s +00.00100s
|`->config-update_etc_hosts ran successfully @03.44600s +00.00000s
|`->config-ca-certs ran successfully @03.44700s +00.00000s
|`->config-rsyslog ran successfully @03.44700s +00.00100s
|`->config-users-groups ran successfully @03.44800s +00.03600s
|`->config-ssh ran successfully @03.48500s +00.17000s
Finished stage: (init-network) 00.69100 seconds

Starting stage: modules-config
|`->config-emit_upstart ran successfully @09.06100s +00.00000s
|`->config-snap ran successfully @09.06200s +00.00000s
|`->config-snap_config ran successfully @09.06200s +00.00100s
|`->config-ssh-import-id ran successfully @09.06300s +01.95700s
|`->config-locale ran successfully @11.02100s +00.00100s
|`->config-set-passwords ran successfully @11.02200s +00.00100s
|`->config-grub-dpkg ran successfully @11.02300s +00.43600s
|`->config-apt-pipelining ran successfully @11.45900s +00.00100s
|`->config-apt-configure ran successfully @11.46000s +00.08100s
|`->config-ubuntu-advantage ran successfully @11.54200s +00.00000s
|`->config-ntp ran successfully @11.54300s +00.08200s
|`->config-timezone ran successfully @11.62700s +00.00100s
|`->config-disable-ec2-metadata ran successfully @11.62900s +00.00000s
|`->config-runcmd ran successfully @11.62900s +00.00100s
|`->config-byobu ran successfully @11.63000s +00.00000s
Finished stage: (modules-config) 02.67000 seconds

Starting stage: modules-final
|`->config-snappy ran successfully @12.16600s +00.00100s
|`->config-package-update-upgrade-install ran successfully @12.16800s +00.00000s
|`->config-fan ran successfully @12.16800s +00.00100s
|`->config-landscape ran successfully @12.16900s +00.00100s
|`->config-lxd ran successfully @12.17000s +00.00100s
|`->config-ubuntu-drivers ran successfully @12.17100s +00.00000s
|`->config-puppet ran successfully @12.17100s +00.00100s
|`->config-chef ran successfully @12.17200s +00.00100s
|`->config-mcollective ran successfully @12.17300s +00.00000s
|`->config-salt-minion ran successfully @12.17300s +00.00100s
|`->config-rightscale_userdata ran successfully @12.17400s +00.00100s
|`->config-scripts-vendor ran successfully @12.17500s +00.00000s
|`->config-scripts-per-once ran successfully @12.17600s +00.00000s
|`->config-scripts-per-boot ran successfully @12.17600s +00.00100s
|`->config-scripts-per-instance ran successfully @12.17700s +00.00000s
|`->config-scripts-user ran successfully @12.17700s +00.00100s
|`->config-ssh-authkey-fingerprints ran successfully @12.17800s +00.00200s
|`->config-keys-to-console ran successfully @12.18100s +00.04800s
|`->config-phone-home ran successfully @12.22900s +00.00100s
|`->config-final-message ran successfully @12.23000s +00.00500s
|`->config-power-state-change ran successfully @12.23500s +00.00100s
Finished stage: (modules-final) 00.11600 seconds

Total Time: 3.67800 seconds

1 boot records analyzed
-- Boot Record 01 --
     01.95700s (modules-config/config-ssh-import-id)
     00.43600s (modules-config/config-grub-dpkg)
     00.17000s (init-network/config-ssh)
     00.08200s (modules-config/config-ntp)
     00.08100s (modules-config/config-apt-configure)
     00.07800s (init-network/config-growpart)
     00.07400s (init-network/config-resizefs)
     00.04800s (modules-final/config-keys-to-console)
     00.04400s (init-network/search-GCE)
     00.03600s (init-network/config-users-groups)
     00.00900s (init-network/config-set_hostname)
     00.00800s (init-network/consume-user-data)
     00.00500s (modules-final/config-final-message)
     00.00200s (modules-final/config-ssh-authkey-fingerprints)
     00.00200s (init-network/activate-datasource)
     00.00100s (modules-final/config-snappy)
     00.00100s (modules-final/config-scripts-user)
     00.00100s (modules-final/config-scripts-per-boot)
     00.00100s (modules-final/config-salt-minion)
     00.00100s (modules-final/config-rightscale_userdata)
     00.00100s (modules-final/config-puppet)
     00.00100s (modules-final/config-power-state-change)
     00.00100s (modules-final/config-phone-home)
     00.00100s (modules-final/config-lxd)
     00.00100s (modules-final/config-landscape)
     00.00100s (modules-final/config-fan)
     00.00100s (modules-final/config-chef)
     00.00100s (modules-config/config-timezone)
     00.00100s (modules-config/config-snap_config)
     00.00100s (modules-config/config-set-passwords)
     00.00100s (modules-config/config-runcmd)
     00.00100s (modules-config/config-locale)
     00.00100s (modules-config/config-apt-pipelining)
     00.00100s (init-network/config-write-files)
     00.00100s (init-network/config-update_hostname)
     00.00100s (init-network/config-seed_random)
     00.00100s (init-network/config-rsyslog)
     00.00100s (init-network/config-mounts)
     00.00100s (init-network/config-disk_setup)
     00.00100s (init-network/check-cache)
     00.00000s (modules-final/config-ubuntu-drivers)
     00.00000s (modules-final/config-scripts-vendor)
     00.00000s (modules-final/config-scripts-per-once)
     00.00000s (modules-final/config-scripts-per-instance)
     00.00000s (modules-final/config-package-update-upgrade-install)
     00.00000s (modules-final/config-mcollective)
     00.00000s (modules-config/config-ubuntu-advantage)
     00.00000s (modules-config/config-snap)
     00.00000s (modules-config/config-emit_upstart)
     00.00000s (modules-config/config-disable-ec2-metadata)
     00.00000s (modules-config/config-byobu)
     00.00000s (init-network/setup-datasource)
     00.00000s (init-network/consume-vendor-data)
     00.00000s (init-network/config-update_etc_hosts)
     00.00000s (init-network/config-migrator)
     00.00000s (init-network/config-ca-certs)
     00.00000s (init-network/config-bootcmd)
     00.00000s (init-local/check-cache)

1 boot records analyzed
After upgrade Networking config
# This file is generated from information provided by the datasource.  Changes
# to it will not persist across an instance reboot.  To disable cloud-init's
# network configuration capabilities, write a file
# /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:
# network: {config: disabled}
network:
    ethernets:
        ens4:
            dhcp4: true
            match:
                macaddress: 42:01:0a:f0:00:48
            set-name: ens4
    version: 2
cloud-region: gce-us-central1
Get cloud-id
gce
Validating whether metadata is being updated per boot LP:1819913
2019-12-06 22:37:22,810 - __init__.py[DEBUG]: Update datasource metadata and network config due to events: New instance first boot

status: done
time: Fri, 06 Dec 2019 22:38:05 +0000
detail:
DataSourceGCE
After reboot
2019-12-06 22:37:22,810 - __init__.py[DEBUG]: Update datasource metadata and network config due to events: New instance first boot
2019-12-06 22:38:00,071 - __init__.py[DEBUG]: Update datasource metadata and network config due to events: New instance first boot

### BEGIN eoan
NAME           ZONE           MACHINE_TYPE   PREEMPTIBLE  INTERNAL_IP  EXTERNAL_IP    STATUS
eoan-sru-test  us-central1-b  n1-standard-1               10.240.0.73  35.184.167.32  RUNNING

status: done
time: Fri, 06 Dec 2019 22:37:03 +0000
detail:
DataSourceGCE
cloud-init	19.2-36-g059d049c-0ubuntu3
{
 "v1": {
  "datasource": "DataSourceGCE",
  "errors": []
 }
}
Startup finished in 1.231s (kernel) + 1min 23.184s (userspace) = 1min 24.415s 
graphical.target reached after 1min 20.467s in userspace
    1min 10.277s snapd.seeded.service
         10.902s pollinate.service
          1.845s cloud-config.service
          1.809s systemd-logind.service
          1.737s systemd-networkd-wait-online.service
          1.727s cloud-init.service
          1.537s google-instance-setup.service
          1.364s accounts-daemon.service
          1.355s lvm2-monitor.service
          1.340s cloud-init-local.service
          1.265s dev-sda1.device
          1.176s networkd-dispatcher.service
          1.096s systemd-udev-settle.service
           923ms snapd.service
           897ms polkit.service
           720ms apparmor.service
           611ms systemd-journald.service
           556ms snapd.socket
           536ms cloud-final.service
           407ms snap.lxd.activate.service
           353ms systemd-networkd.service
           339ms systemd-resolved.service
           305ms google-startup-scripts.service
           301ms grub-common.service
           272ms plymouth-quit-wait.service
           249ms keyboard-setup.service
           245ms systemd-udev-trigger.service
           237ms apport.service
           217ms plymouth-quit.service
           209ms grub-initrd-fallback.service
           180ms rsyslog.service
           175ms systemd-user-sessions.service
           167ms atd.service
           133ms blk-availability.service
           132ms systemd-modules-load.service
           131ms dev-hugepages.mount
           129ms systemd-remount-fs.service
           128ms dev-mqueue.mount
           120ms user@1000.service
           107ms kmod-static-nodes.service
            83ms systemd-udevd.service
            80ms sys-kernel-debug.mount
            73ms chrony.service
            66ms systemd-sysusers.service
            63ms ufw.service
            62ms systemd-machine-id-commit.service
            62ms multipathd.service
            62ms console-setup.service
            61ms systemd-sysctl.service
            54ms finalrd.service
            53ms dev-loop2.device
            52ms systemd-tmpfiles-setup.service
            45ms dev-loop1.device
            45ms sys-fs-fuse-connections.mount
            44ms sys-kernel-config.mount
            43ms systemd-tmpfiles-setup-dev.service
            41ms plymouth-read-write.service
            36ms ssh.service
            34ms snap-lxd-12631.mount
            33ms snap-google\x2dcloud\x2dsdk-108.mount
            32ms systemd-update-utmp-runlevel.service
            30ms systemd-random-seed.service
            27ms systemd-journal-flush.service
            24ms snap-core-8039.mount
            21ms dev-loop0.device
            20ms user-runtime-dir@1000.service
            17ms boot-efi.mount
            15ms systemd-update-utmp.service
            10ms setvtrgb.service
            10ms google-shutdown-scripts.service
-- Boot Record 01 --
The total time elapsed since completing an event is printed after the "@" character.
The time the event takes is printed after the "+" character.

Starting stage: init-local
|`->no cache found @00.00400s +00.00000s
Finished stage: (init-local) 00.17800 seconds 

Starting stage: init-network
|`->no cache found @02.74300s +00.00000s
|`->found network data from DataSourceGCE @02.74700s +00.06600s
|`->setting up datasource @02.96100s +00.00000s
|`->reading and applying user-data @02.97400s +00.00700s
|`->reading and applying vendor-data @02.98100s +00.00000s
|`->activating datasource @03.02100s +00.00100s
|`->config-migrator ran successfully @03.04500s +00.00000s
|`->config-seed_random ran successfully @03.04600s +00.00000s
|`->config-bootcmd ran successfully @03.04700s +00.00000s
|`->config-write-files ran successfully @03.04700s +00.00000s
|`->config-growpart ran successfully @03.04800s +00.43300s
|`->config-resizefs ran successfully @03.48100s +00.18000s
|`->config-disk_setup ran successfully @03.66100s +00.00100s
|`->config-mounts ran successfully @03.66200s +00.00100s
|`->config-set_hostname ran successfully @03.66400s +00.00400s
|`->config-update_hostname ran successfully @03.66800s +00.00100s
|`->config-update_etc_hosts ran successfully @03.67000s +00.00000s
|`->config-ca-certs ran successfully @03.67000s +00.00100s
|`->config-rsyslog ran successfully @03.67100s +00.00000s
|`->config-users-groups ran successfully @03.67100s +00.07100s
|`->config-ssh ran successfully @03.74300s +00.29300s
Finished stage: (init-network) 01.30900 seconds 

Starting stage: modules-config
|`->config-emit_upstart ran successfully @76.67200s +00.00100s
|`->config-snap ran successfully @76.67300s +00.00000s
|`->config-snap_config ran successfully @76.67400s +00.00000s
|`->config-ssh-import-id ran successfully @76.67400s +00.83100s
|`->config-locale ran successfully @77.50500s +00.00200s
|`->config-set-passwords ran successfully @77.50700s +00.00100s
|`->config-grub-dpkg ran successfully @77.50800s +00.26500s
|`->config-apt-pipelining ran successfully @77.77400s +00.00100s
|`->config-apt-configure ran successfully @77.77500s +00.09100s
|`->config-ubuntu-advantage ran successfully @77.86700s +00.00100s
|`->config-ntp ran successfully @77.86800s +00.11000s
|`->config-timezone ran successfully @77.98000s +00.00100s
|`->config-disable-ec2-metadata ran successfully @77.98100s +00.00100s
|`->config-runcmd ran successfully @77.98200s +00.00000s
|`->config-byobu ran successfully @77.98400s +00.00000s
Finished stage: (modules-config) 01.33900 seconds 

Starting stage: modules-final
|`->config-snappy ran successfully @78.48100s +00.00100s
|`->config-package-update-upgrade-install ran successfully @78.48200s +00.00100s
|`->config-fan ran successfully @78.48300s +00.00000s
|`->config-landscape ran successfully @78.48400s +00.00000s
|`->config-lxd ran successfully @78.48400s +00.00100s
|`->config-ubuntu-drivers ran successfully @78.48500s +00.00000s
|`->config-puppet ran successfully @78.48600s +00.00000s
|`->config-chef ran successfully @78.48600s +00.00100s
|`->config-mcollective ran successfully @78.48700s +00.00000s
|`->config-salt-minion ran successfully @78.48800s +00.00000s
|`->config-rightscale_userdata ran successfully @78.48800s +00.00100s
|`->config-scripts-vendor ran successfully @78.48900s +00.00000s
|`->config-scripts-per-once ran successfully @78.49000s +00.00000s
|`->config-scripts-per-boot ran successfully @78.49000s +00.00100s
|`->config-scripts-per-instance ran successfully @78.49100s +00.00000s
|`->config-scripts-user ran successfully @78.49100s +00.00100s
|`->config-ssh-authkey-fingerprints ran successfully @78.49200s +00.00200s
|`->config-keys-to-console ran successfully @78.49500s +00.02500s
|`->config-phone-home ran successfully @78.52000s +00.00100s
|`->config-final-message ran successfully @78.52100s +00.00500s
|`->config-power-state-change ran successfully @78.52600s +00.00100s
Finished stage: (modules-final) 00.07300 seconds 

Total Time: 2.89900 seconds

1 boot records analyzed
-- Boot Record 01 --
     00.83100s (modules-config/config-ssh-import-id)
     00.43300s (init-network/config-growpart)
     00.29300s (init-network/config-ssh)
     00.26500s (modules-config/config-grub-dpkg)
     00.18000s (init-network/config-resizefs)
     00.11000s (modules-config/config-ntp)
     00.09100s (modules-config/config-apt-configure)
     00.07100s (init-network/config-users-groups)
     00.06600s (init-network/search-GCE)
     00.02500s (modules-final/config-keys-to-console)
     00.00700s (init-network/consume-user-data)
     00.00500s (modules-final/config-final-message)
     00.00400s (init-network/config-set_hostname)
     00.00200s (modules-final/config-ssh-authkey-fingerprints)
     00.00200s (modules-config/config-locale)
     00.00100s (modules-final/config-snappy)
     00.00100s (modules-final/config-scripts-user)
     00.00100s (modules-final/config-scripts-per-boot)
     00.00100s (modules-final/config-rightscale_userdata)
     00.00100s (modules-final/config-power-state-change)
     00.00100s (modules-final/config-phone-home)
     00.00100s (modules-final/config-package-update-upgrade-install)
     00.00100s (modules-final/config-lxd)
     00.00100s (modules-final/config-chef)
     00.00100s (modules-config/config-ubuntu-advantage)
     00.00100s (modules-config/config-timezone)
     00.00100s (modules-config/config-set-passwords)
     00.00100s (modules-config/config-emit_upstart)
     00.00100s (modules-config/config-disable-ec2-metadata)
     00.00100s (modules-config/config-apt-pipelining)
     00.00100s (init-network/config-update_hostname)
     00.00100s (init-network/config-mounts)
     00.00100s (init-network/config-disk_setup)
     00.00100s (init-network/config-ca-certs)
     00.00100s (init-network/activate-datasource)
     00.00000s (modules-final/config-ubuntu-drivers)
     00.00000s (modules-final/config-scripts-vendor)
     00.00000s (modules-final/config-scripts-per-once)
     00.00000s (modules-final/config-scripts-per-instance)
     00.00000s (modules-final/config-salt-minion)
     00.00000s (modules-final/config-puppet)
     00.00000s (modules-final/config-mcollective)
     00.00000s (modules-final/config-landscape)
     00.00000s (modules-final/config-fan)
     00.00000s (modules-config/config-snap_config)
     00.00000s (modules-config/config-snap)
     00.00000s (modules-config/config-runcmd)
     00.00000s (modules-config/config-byobu)
     00.00000s (init-network/setup-datasource)
     00.00000s (init-network/consume-vendor-data)
     00.00000s (init-network/config-write-files)
     00.00000s (init-network/config-update_etc_hosts)
     00.00000s (init-network/config-seed_random)
     00.00000s (init-network/config-rsyslog)
     00.00000s (init-network/config-migrator)
     00.00000s (init-network/config-bootcmd)
     00.00000s (init-network/check-cache)
     00.00000s (init-local/check-cache)

1 boot records analyzed
Networking config
# This file is generated from information provided by
# the datasource.  Changes to it will not persist across an instance.
# To disable cloud-init's network configuration capabilities, write a file
# /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:
# network: {config: disabled}
network:
    ethernets:
        ens4:
            dhcp4: true
            match:
                macaddress: 42:01:0a:f0:00:49
            set-name: ens4
    version: 2
  cloud-init
Get:1 http://archive.ubuntu.com/ubuntu eoan-proposed/main amd64 cloud-init all 19.3-41-gc4735dd3-0ubuntu1~19.10.1 [406 kB]
Preparing to unpack .../cloud-init_19.3-41-gc4735dd3-0ubuntu1~19.10.1_all.deb ...
Unpacking cloud-init (19.3-41-gc4735dd3-0ubuntu1~19.10.1) over (19.2-36-g059d049c-0ubuntu3) ...
Setting up cloud-init (19.3-41-gc4735dd3-0ubuntu1~19.10.1) ...
cloud-init	19.3-41-gc4735dd3-0ubuntu1~19.10.1

status: done
time: Fri, 06 Dec 2019 22:38:53 +0000
detail:
DataSourceGCE
SRU-worked-gce
Startup finished in 1.304s (kernel) + 18.826s (userspace) = 20.130s 
graphical.target reached after 15.268s in userspace
          5.162s snap.lxd.activate.service
          3.640s snapd.service
          3.134s cloud-config.service
          2.863s google-instance-setup.service
          2.571s systemd-logind.service
          2.455s systemd-hostnamed.service
          2.194s e2scrub_reap.service
          1.974s cloud-init.service
          1.850s pollinate.service
          1.615s systemd-networkd-wait-online.service
          1.504s networkd-dispatcher.service
          1.497s cloud-init-local.service
          1.452s lvm2-monitor.service
          1.436s accounts-daemon.service
          1.354s dev-sda1.device
          1.221s systemd-udev-settle.service
           949ms apport.service
           912ms cloud-final.service
           649ms blk-availability.service
           597ms systemd-journald.service
           571ms google-startup-scripts.service
           508ms apparmor.service
           377ms polkit.service
           355ms rsyslog.service
           344ms plymouth-quit.service
           335ms systemd-resolved.service
           328ms systemd-networkd.service
           263ms grub-initrd-fallback.service
           247ms atd.service
           240ms systemd-user-sessions.service
           233ms plymouth-quit-wait.service
           231ms grub-common.service
           228ms systemd-udev-trigger.service
           222ms snapd.seeded.service
           214ms snapd.socket
           205ms keyboard-setup.service
           179ms user@1000.service
           167ms systemd-journal-flush.service
           140ms dev-mqueue.mount
           139ms kmod-static-nodes.service
           128ms systemd-modules-load.service
           127ms sys-kernel-debug.mount
           123ms systemd-remount-fs.service
           119ms dev-hugepages.mount
           116ms ufw.service
           107ms setvtrgb.service
           104ms ssh.service
            95ms systemd-udevd.service
            69ms chrony.service
            69ms systemd-update-utmp-runlevel.service
            69ms multipathd.service
            68ms google-shutdown-scripts.service
            56ms systemd-sysusers.service
            55ms systemd-sysctl.service
            50ms snap-core-8039.mount
            48ms dev-loop2.device
            46ms dev-loop1.device
            45ms dev-loop0.device
            43ms snap-lxd-12631.mount
            41ms boot-efi.mount
            40ms systemd-tmpfiles-setup.service
            40ms snap-google\x2dcloud\x2dsdk-108.mount
            38ms console-setup.service
            37ms finalrd.service
            37ms sys-fs-fuse-connections.mount
            29ms systemd-random-seed.service
            29ms systemd-tmpfiles-setup-dev.service
            27ms plymouth-read-write.service
            23ms user-runtime-dir@1000.service
            22ms sys-kernel-config.mount
            15ms systemd-update-utmp.service
-- Boot Record 01 --
The total time elapsed since completing an event is printed after the "@" character.
The time the event takes is printed after the "+" character.

Starting stage: init-local
|`->no cache found @00.00300s +00.00000s
Finished stage: (init-local) 00.16700 seconds

Starting stage: init-network
|`->no cache found @02.60000s +00.00100s
|`->found network data from DataSourceGCE @02.60400s +00.04600s
|`->setting up datasource @02.80900s +00.00000s
|`->reading and applying user-data @02.82200s +00.00800s
|`->reading and applying vendor-data @02.83000s +00.00000s
|`->activating datasource @02.87200s +00.00100s
|`->config-migrator ran successfully @02.98300s +00.00100s
|`->config-seed_random ran successfully @02.98400s +00.00100s
|`->config-bootcmd ran successfully @02.98500s +00.00000s
|`->config-write-files ran successfully @02.98500s +00.00100s
|`->config-growpart ran successfully @02.98600s +00.07700s
|`->config-resizefs ran successfully @03.06300s +00.04700s
|`->config-disk_setup ran successfully @03.11000s +00.00100s
|`->config-mounts ran successfully @03.11200s +00.00100s
|`->config-set_hostname ran successfully @03.11300s +00.00500s
|`->config-update_hostname ran successfully @03.11800s +00.00100s
|`->config-update_etc_hosts ran successfully @03.11900s +00.00000s
|`->config-ca-certs ran successfully @03.12000s +00.00100s
|`->config-rsyslog ran successfully @03.12100s +00.00200s
|`->config-users-groups ran successfully @03.12300s +00.04800s
|`->config-ssh ran successfully @03.17200s +00.95400s
Finished stage: (init-network) 01.54500 seconds

Starting stage: modules-config
|`->config-emit_upstart ran successfully @12.28300s +00.00000s
|`->config-snap ran successfully @12.28300s +00.00100s
|`->config-snap_config ran successfully @12.28400s +00.00100s
|`->config-ssh-import-id ran successfully @12.28500s +-0.11100s
|`->config-locale ran successfully @12.17500s +00.00100s
|`->config-set-passwords ran successfully @12.17700s +00.00000s
|`->config-grub-dpkg ran successfully @12.17800s +00.29900s
|`->config-apt-pipelining ran successfully @12.47800s +00.00100s
|`->config-apt-configure ran successfully @12.47900s +00.11300s
|`->config-ubuntu-advantage ran successfully @12.59200s +00.00100s
|`->config-ntp ran successfully @12.59300s +00.11200s
|`->config-timezone ran successfully @12.70600s +00.00200s
|`->config-disable-ec2-metadata ran successfully @12.70800s +00.00000s
|`->config-runcmd ran successfully @12.70800s +00.00100s
|`->config-byobu ran successfully @12.70900s +00.00100s
Finished stage: (modules-config) 00.45300 seconds

Starting stage: modules-final
|`->config-snappy ran successfully @13.47300s +00.00200s
|`->config-package-update-upgrade-install ran successfully @13.47600s +00.00100s
|`->config-fan ran successfully @13.47700s +00.00100s
|`->config-landscape ran successfully @13.47800s +00.00100s
|`->config-lxd ran successfully @13.47900s +00.00100s
|`->config-ubuntu-drivers ran successfully @13.48000s +00.00100s
|`->config-puppet ran successfully @13.48100s +00.00700s
|`->config-chef ran successfully @13.48800s +00.00000s
|`->config-mcollective ran successfully @13.48900s +00.00000s
|`->config-salt-minion ran successfully @13.48900s +00.00100s
|`->config-rightscale_userdata ran successfully @13.49000s +00.00100s
|`->config-scripts-vendor ran successfully @13.49100s +00.00500s
|`->config-scripts-per-once ran successfully @13.49600s +00.00000s
|`->config-scripts-per-boot ran successfully @13.49700s +00.00000s
|`->config-scripts-per-instance ran successfully @13.49700s +00.00100s
|`->config-scripts-user ran successfully @13.49800s +00.00000s
|`->config-ssh-authkey-fingerprints ran successfully @13.49800s +00.00700s
|`->config-keys-to-console ran successfully @13.50500s +00.05300s
|`->config-phone-home ran successfully @13.56000s +00.00100s
|`->config-final-message ran successfully @13.56100s +00.00900s
|`->config-power-state-change ran successfully @13.57000s +00.00100s
Finished stage: (modules-final) 00.14100 seconds

Total Time: 2.30600 seconds

1 boot records analyzed
-- Boot Record 01 --
     00.95400s (init-network/config-ssh)
     00.29900s (modules-config/config-grub-dpkg)
     00.11300s (modules-config/config-apt-configure)
     00.11200s (modules-config/config-ntp)
     00.07700s (init-network/config-growpart)
     00.05300s (modules-final/config-keys-to-console)
     00.04800s (init-network/config-users-groups)
     00.04700s (init-network/config-resizefs)
     00.04600s (init-network/search-GCE)
     00.00900s (modules-final/config-final-message)
     00.00800s (init-network/consume-user-data)
     00.00700s (modules-final/config-ssh-authkey-fingerprints)
     00.00700s (modules-final/config-puppet)
     00.00500s (modules-final/config-scripts-vendor)
     00.00500s (init-network/config-set_hostname)
     00.00200s (modules-final/config-snappy)
     00.00200s (modules-config/config-timezone)
     00.00200s (init-network/config-rsyslog)
     00.00100s (modules-final/config-ubuntu-drivers)
     00.00100s (modules-final/config-scripts-per-instance)
     00.00100s (modules-final/config-salt-minion)
     00.00100s (modules-final/config-rightscale_userdata)
     00.00100s (modules-final/config-power-state-change)
     00.00100s (modules-final/config-phone-home)
     00.00100s (modules-final/config-package-update-upgrade-install)
     00.00100s (modules-final/config-lxd)
     00.00100s (modules-final/config-landscape)
     00.00100s (modules-final/config-fan)
     00.00100s (modules-config/config-ubuntu-advantage)
     00.00100s (modules-config/config-snap_config)
     00.00100s (modules-config/config-snap)
     00.00100s (modules-config/config-runcmd)
     00.00100s (modules-config/config-locale)
     00.00100s (modules-config/config-byobu)
     00.00100s (modules-config/config-apt-pipelining)
     00.00100s (init-network/config-write-files)
     00.00100s (init-network/config-update_hostname)
     00.00100s (init-network/config-seed_random)
     00.00100s (init-network/config-mounts)
     00.00100s (init-network/config-migrator)
     00.00100s (init-network/config-disk_setup)
     00.00100s (init-network/config-ca-certs)
     00.00100s (init-network/check-cache)
     00.00100s (init-network/activate-datasource)
     00.00000s (modules-final/config-scripts-user)
     00.00000s (modules-final/config-scripts-per-once)
     00.00000s (modules-final/config-scripts-per-boot)
     00.00000s (modules-final/config-mcollective)
     00.00000s (modules-final/config-chef)
     00.00000s (modules-config/config-set-passwords)
     00.00000s (modules-config/config-emit_upstart)
     00.00000s (modules-config/config-disable-ec2-metadata)
     00.00000s (init-network/setup-datasource)
     00.00000s (init-network/consume-vendor-data)
     00.00000s (init-network/config-update_etc_hosts)
     00.00000s (init-network/config-bootcmd)
     00.00000s (init-local/check-cache)

1 boot records analyzed
After upgrade Networking config
# This file is generated from information provided by the datasource.  Changes
# to it will not persist across an instance reboot.  To disable cloud-init's
# network configuration capabilities, write a file
# /etc/cloud/cloud.cfg.d/99-disable-network-config.cfg with the following:
# network: {config: disabled}
network:
    ethernets:
        ens4:
            dhcp4: true
            match:
                macaddress: 42:01:0a:f0:00:49
            set-name: ens4
    version: 2
cloud-region: gce-us-central1
Get cloud-id
gce
Validating whether metadata is being updated per boot LP:1819913
2019-12-06 22:38:42,453 - __init__.py[DEBUG]: Update datasource metadata and network config due to events: New instance first boot

status: done
time: Fri, 06 Dec 2019 22:39:29 +0000
detail:
DataSourceGCE
After reboot
2019-12-06 22:38:42,453 - __init__.py[DEBUG]: Update datasource metadata and network config due to events: New instance first boot
2019-12-06 22:39:23,526 - __init__.py[DEBUG]: Update datasource metadata and network config due to events: New instance first boot
